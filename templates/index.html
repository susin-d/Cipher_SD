<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Audio/Video & Download</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-950 min-h-screen flex items-center justify-center p-4 relative">
    <canvas id="waveCanvas"></canvas>

    <div class="glass-effect p-8 rounded-lg shadow-2xl w-full max-w-md text-center border border-gray-700">
        <h1 class="text-3xl font-bold text-gray-100 mb-6">Upload Your Audio/Video</h1>
        <p class="text-gray-300 mb-8">Select individual MP3, MP4, or WAV files, or an entire folder.</p>

        <div class="mb-6 flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
            <div>
                <label for="fileInputFiles" class="custom-file-upload">
                    Choose File(s)
                </label>
                <input type="file" id="fileInputFiles" accept=".mp3, .mp4, .wav" multiple>
            </div>
            <div>
                <label for="fileInputFolder" class="custom-file-upload">
                    Choose Folder
                </label>
                <input type="file" id="fileInputFolder" accept=".mp3, .mp4, .wav" webkitdirectory directory>
            </div>
        </div>
        <p id="fileNameDisplay" class="mt-4 text-gray-400 text-sm italic"></p>

        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-200 mb-4">Select Whisper Model Size</h2>
            <div id="modelSelection" class="flex overflow-x-auto space-x-3 p-2 rounded-lg bg-gray-900 border border-gray-700 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900">
                </div>
            <input type="hidden" id="selectedModel" value="">
            <p id="modelDisplay" class="mt-4 text-gray-400 text-sm italic"></p>
        </div>

        <button id="processButton"
            class="w-full bg-gradient-to-br from-green-600 to-green-800 hover:from-green-500 hover:to-green-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105
                   focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-75 disabled:opacity-50 disabled:cursor-not-allowed disabled:from-gray-600 disabled:to-gray-800"
            disabled>
            Process File(s)
        </button>

        <div id="loadingBarContainer" class="loading-bar-container hidden">
            <div id="loadingBarFill" class="loading-bar-fill"></div>
        </div>
        <p id="loadingMessage" class="mt-2 text-sm text-gray-400 hidden">Processing...</p>

        <div id="downloadLinksContainer" class="hidden">
            <h3 class="text-lg font-semibold text-gray-200 mb-2">Download Subtitles:</h3>
            <div id="downloadLinksList" class="text-left">
                </div>
        </div>

        <div id="messageArea" class="mt-6 text-sm text-gray-400"></div>
    </div>

    <script src="static/js/script.js" defer></script>
</body>
</html>